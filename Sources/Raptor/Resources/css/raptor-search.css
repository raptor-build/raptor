.search-form {
    display: flex;
    flex-direction: row;
    align-items: stretch;
    flex: 0 0 auto;
    min-width: 0;
    gap: var(--search-gap, 0.5rem);
}

/* Prevent stretch inside navbars */
.nav-inner > li:has(.search-form) {
    flex: 0 0 auto;
    width: auto;
    max-width: none;
}

/* --- Input + Button Layout --- */
.search-form input {
    flex: 1 1 auto;
    min-width: 0;
    border: 1px solid transparent;
    border-radius: var(--btn-corner-radius, 0.375rem);
    box-sizing: border-box;
}

.search-form button {
    flex: 0 0 auto;
    white-space: nowrap;
    border-radius: var(--btn-corner-radius, 0.375rem);
}

/* --- Normalize Layout --- */
.search-form,
.search-form * {
    margin: 0;
    border-spacing: 0;
    gap: 0.5rem;
}

/* --- Base Border Reset (scoped) --- */
/* Only flatten when inside joined layouts */
.ctrl-group .search-input,
.ctrl-group .search-button,
.search-form.search-spacing-none .search-input,
.search-form.search-spacing-none .search-button {
    border-radius: 0;
}

/* Otherwise, allow normal inherited radius */
.search-input,
.search-button {
    border-radius: var(--btn-corner-radius, 0.375rem);
    box-sizing: border-box;
}

/* --- Input: rounded left only --- */
.search-input {
    border-top-left-radius: var(--btn-corner-radius, 0.375rem) !important;
    border-bottom-left-radius: var(--btn-corner-radius, 0.375rem) !important;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

/* --- Button: rounded right only --- */
.search-button {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    border-top-right-radius: var(--btn-corner-radius, 0.375rem);
    border-bottom-right-radius: var(--btn-corner-radius, 0.375rem);
}

/* If inside a .btn-bordered parent, force visual continuity */
.btn-bordered .search-button {
    border: 1px solid var(--accent, currentColor);
    box-sizing: border-box;
}

/* --- Control sizing / alignment --- */
.search-form input,
.search-form button {
    font-size: var(--ctrl-font-size, 1em);
    line-height: var(--ctrl-line-height, 1.25em);
    padding: var(--ctrl-padding, 0em 0.75em);
    height: auto;
}

/* Keep visual alignment consistent with .btn and .ctrl-group */
.search-form {
    align-items: center; /* instead of stretch */
}

/* Fix baseline alignment issue inside .ctrl-group */
.ctrl-group .search-form {
    display: flex;
    gap: 0;
    align-items: center;
}

/* Input shouldnâ€™t grow taller than its siblings */
.search-form input {
    display: flex;
    align-items: stretch;
    box-sizing: border-box;
}

/* --- Button theming --- */
.search-form {
    --btn-bg: var(--accent);
    --btn-fg: white;
    --btn-border: none;
    --btn-hover-bg: color-mix(in srgb, var(--accent) 92%, black);
    --btn-active-bg: color-mix(in srgb, var(--accent) 85%, black);
}

.search-form .search-button {
    background: var(--btn-bg);
    color: var(--btn-fg);
    border: var(--btn-border);
}

/* Default rounded rectangle */
.search-button {
    --btn-corner-radius: 0.375rem;
    --btn-corner-shape: superellipse(1.25);
    border-radius: var(--btn-corner-radius);
    corner-shape: var(--btn-corner-shape);
}

/* Capsule */
.search-form.ctrl-capsule .search-button {
    --btn-corner-radius: 9999px;
    --btn-corner-shape: round;
    border-radius: var(--btn-corner-radius);
    corner-shape: var(--btn-corner-shape);
}

.search-form.ctrl-capsule button.search-button.btn {
    border-radius: var(--btn-corner-radius);
    corner-shape: var(--btn-corner-shape);
}

.search-form.ctrl-rounded .search-button {
    --btn-corner-radius: 0.375rem;
    --btn-corner-shape: superellipse(1.25);
    border-radius: var(--btn-corner-radius);
    corner-shape: var(--btn-corner-shape);
}

.search-form.ctrl-rect .search-button {
    --btn-corner-radius: 0;
    --btn-corner-shape: rect;
    border-radius: var(--btn-corner-radius);
    corner-shape: var(--btn-corner-shape);
}
