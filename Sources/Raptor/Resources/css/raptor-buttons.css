/* =========================================================
 BUTTON SYSTEM (VARIABLE-DRIVEN & NESTING-SAFE)
 ========================================================= */

/* --- Reset --- */
button, a.btn {
    appearance: none;
    background: transparent;
    margin: 0;
    padding: 0;
    font: inherit;
    color: inherit;
    cursor: pointer;
    --btn-hover-bg: var(--accent-quaternary);
    --btn-active-bg: var(--accent-quinary);
    --btn-hover-border: 1px solid var(--accent-quaternary);
    --btn-active-border: 1px solid var(--accent-quinary);
}

/* --- Base Button --- */
button.btn, a.btn {
    text-decoration: none;
    user-select: none;
    -webkit-user-select: none;
    transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);

    background-color: var(--btn-bg, var(--accent-tertiary));
    --fg: var(--btn-fg, var(--accent));
    color: var(--fg);
    border: var(--btn-border, 1px solid transparent);
    border-radius: var(--btn-radius, 0.375rem);
    corner-shape: var(--btn-corner-shape, round);

    font-size: var(--ctrl-font-size, 1em);
    padding: var(--ctrl-padding, 0.5em 1em);
}

button.btn > * + * {
    margin-left: var(--ctrl-gap, 0.5rem);
}

/* =========================================================
 TOKENS — VARIANT CONTAINERS
 ========================================================= */

/* --- Plain --- */
.btn-plain {
    --btn-bg: transparent;
    --btn-fg: var(--fg);
    --btn-border: none;
    --btn-hover-bg: transparent;
    --btn-active-bg: transparent;
}

/* --- Filled / Prominent --- */
.btn-prominent,
.btn-prominent .btn,
.btn-prominent .search-button {
    --btn-bg: var(--accent);
    --fg: var(--fg-dm);
    --btn-fg: var(--fg-dm);
    --btn-border: none;
    --btn-hover-bg: color-mix(in srgb, var(--accent) 92%, black);
    --btn-active-bg: color-mix(in srgb, var(--accent) 85%, black);
}

.btn-filled,
.btn-filled .btn,
.btn-filled .search-button {
    --btn-bg: var(--accent-tertiary);
    --fg: var(--accent);
    --btn-fg: var(--accent);
    --btn-border: 1px solid var(--accent-tertiary);
    --btn-hover-bg: var(--accent-quaternary);
    --btn-active-bg: var(--accent-quinary);
    --btn-hover-border: 1px solid var(--accent-quaternary);
    --btn-active-border: 1px solid var(--accent-quinary);
}

/* --- Bordered --- */
.btn-bordered,
.btn-bordered .btn,
.btn-bordered .search-button {
    --btn-bg: transparent;
    --fg: var(--accent);
    --btn-fg: var(--accent);
    --btn-border: 1px solid var(--accent);
    --btn-hover-bg: var(--accent-tertiary);
    --btn-active-bg: var(--accent-quaternary);
    --btn-hover-border: 1px solid color-mix(in srgb, var(--accent) 85%, black);
    --btn-active-border: 1px solid color-mix(in srgb, var(--accent) 70%, black);
}

/* --- Borderless --- */
.btn-borderless,
.btn-borderless .btn,
.btn-borderless .search-button {
    --btn-bg: transparent;
    --fg: var(--accent);
    --btn-fg: var(--accent);
    --btn-border: none;
    --btn-hover-bg: var(--accent-tertiary);
    --btn-active-bg: var(--accent-quaternary);
}

/* =========================================================
 SHAPE & SIZE TOKENS
 ========================================================= */

/* Shapes */
.ctrl-capsule {
    --btn-radius: 9999px;
    --btn-corner-shape: round;
}

.ctrl-rounded {
    --btn-radius: 0.375rem;
    --btn-corner-shape: superellipse(1.25);
}

.ctrl-rect {
    --btn-radius: 0;
    --btn-corner-shape: rect;
}

.ctrl-circle {
    --btn-radius: 50%;
    --btn-corner-shape: round;
    aspect-ratio: 1;
}

/* Flexible width */
.btn-flexible,
.btn-flexible input,
.btn-flexible button {
    width: 100%;
}

/* =========================================================
 INTERACTION STATES
 ========================================================= */

/* Hover / Active — variable-based */
button.btn:hover,
button.btn:focus-visible,
a.btn:hover,
a.btn:focus-visible {
    background-color: var(--btn-hover-bg, var(--accent-tertiary));
    border: var(--btn-hover-border, var(--btn-border 1px));
}

button.btn:active,
a.btn:active {
    background-color: var(--btn-active-bg, var(--accent-quaternary));
    border: var(--btn-active-border, var(--btn-border 1px));
}

/* Disabled */
button.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Icon-only */
button.btn.btn-icon {
    padding: 0.5rem;
    aspect-ratio: 1;
}

/* =========================================================
 DARK MODE ADJUSTMENTS
 ========================================================= */

[data-color-scheme="dark"] .btn-prominent {
    --btn-hover-bg: color-mix(in srgb, var(--accent) 92%, white);
    --btn-active-bg: color-mix(in srgb, var(--accent) 85%, white);
}
